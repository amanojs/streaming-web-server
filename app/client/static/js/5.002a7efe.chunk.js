(this.webpackJsonpstreaming=this.webpackJsonpstreaming||[]).push([[5],{187:function(e,t,o){},189:function(e,t,o){"use strict";o.d(t,"a",(function(){return f}));var a=o(185),n=o.n(a),i=o(186),r=o(192),s=(o(0),o(172)),u=o(265),c=o(266),l=o(180),d=o(173),b=o(170),m=o(274),h=o(4),j=function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{style:{color:"#606060",padding:"0 0 3px 0",fontSize:"13px",fontWeight:"bold"},children:e.label}),Object(h.jsx)(m.a,{fullWidth:!0,error:e.error,helperText:e.msg,variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)},color:"secondary",placeholder:e.placeholder})]})},p=(o(187),function(e){var t=Object(s.a)({form_card:{width:e.width,padding:"55px 0"}})();return Object(h.jsx)(u.a,{className:t.form_card,children:Object(h.jsx)("form",{style:{width:"100%"},onSubmit:e.submitEvent,children:Object(h.jsx)(c.a,{container:!0,justify:"center",spacing:1,children:Object(h.jsx)(c.a,{item:!0,xs:10,children:Object(h.jsxs)(c.a,{container:!0,spacing:1,children:[Object(h.jsx)(c.a,{item:!0,xs:12,children:Object(h.jsx)(l.a,{className:"create_room_head",display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"0px",marginBottom:"30px",children:Object(h.jsx)("span",{children:e.head})})}),e.inputs.map((function(e){return Object(h.jsx)(c.a,{item:!0,xs:12,children:Object(h.jsx)(j,{label:e.label,error:e.error,msg:e.msg,placeholder:e.placeholder,value:e.value,onChange:e.onChange})},e.label)})),Object(h.jsx)(c.a,{item:!0,xs:12,children:Object(h.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",disabled:e.load,disableElevation:!0,color:"secondary",children:e.load?Object(h.jsx)(b.a,{size:24,style:{color:"#fff"}}):e.btn})})]})})})})})}),f=function(e){var t,o=Object(r.a)(e.inputs);try{for(o.s();!(t=o.n()).done;){var a=t.value;a.onChange=a.onChange.bind(a)}}catch(c){o.e(c)}finally{o.f()}var s=function(){var t,o=!1,a=Object(r.a)(e.inputs);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.onChange(n.value),n.validate(n.value).error&&(o=!0)}}catch(c){a.e(c)}finally{a.f()}return o},u=function(){var t=Object(i.a)(n.a.mark((function t(o){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.preventDefault(),!s()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.onSubmit();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsx)(p,{width:e.width,head:e.head,btn:e.btn,inputs:e.inputs,load:e.load,submitEvent:u})};f.defaultProps={width:"100%"}},228:function(e,t,o){},247:function(e,t,o){},248:function(e,t,o){},275:function(e,t,o){"use strict";o.r(t);var a=o(28),n=o(0),i=o(6),r=o(71),s=o(48),u=o(68),c=o(66),l=o(266),d=o(180),b=o(277),m=o(185),h=o.n(m),j=o(186),p=o(212),f=o(213),v=o(197),g=o(250),x=o(249),y=o(214),O=o(7),k=o(279),S=o(181),w=o(175),D=o(269),C=o(270),_=o(271),I=o(272),M=o(267),V=o(268),T=o(4),z=function(e){return Object(T.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(T.jsx)(w.a,{size:"small",color:"secondary",onClick:e.onClick,children:e.isMute?Object(T.jsx)(M.a,{}):Object(T.jsx)(V.a,{})}),Object(T.jsx)(S.a,{xsDown:!0,children:!e.isSmartPhone()&&Object(T.jsx)(L,{valueLabelDisplay:"off",step:.001,min:0,max:100,value:e.volume,onChange:e.onChange,style:{width:"100%",marginLeft:"12px"}})})]})},L=Object(O.a)({root:{color:"#1dd1a1",paddingTop:0,marginBottom:0,padding:0},thumb:{height:14,width:14,backgroundColor:"currentColor",border:"2px solid currentColor","&:hover":{height:14,width:14,backgroundColor:"currentColor",boxShadow:"none"},"&:focus":{boxShadow:"none"},"&:active":{boxShadow:"none"}},active:{},valueLabel:{left:"calc(-80%)","& *":{paddingRight:5,background:"transparent",color:"#fff",fontWeight:"bold",textShadow:"2px 2px 4px #222"}},track:{height:4,borderRadius:0},rail:{height:4,borderRadius:0}})(k.a),A=function(e){return Object(T.jsx)(z,{onClick:e.onClick,onChange:e.onChange,isMute:e.isMute,volume:e.volume,isSmartPhone:function(){return!!navigator.userAgent.match(/iPhone|Android.+Mobile/)}})},P=Object(O.a)({root:{color:"#1dd1a1",paddingTop:0},thumb:{height:10,width:10,backgroundColor:"currentColor",marginTop:-1,marginLeft:-1,border:"2px solid currentColor","&:hover":{boxShadow:"2px 2px 8px currentColor",height:16,width:16,marginTop:-6,marginLeft:-10,backgroundColor:"currentColor"},"&:focus":{boxShadow:"2px 2px 8px currentColor"}},active:{},valueLabel:{left:"calc(-80%)","& *":{paddingRight:5,background:"transparent",color:"#fff",fontWeight:"bold",textShadow:"2px 2px 4px #222"}},track:{height:8,borderRadius:0},rail:{height:8,borderRadius:0}})(k.a),F=function(e){return Object(T.jsx)(n.Fragment,{children:Object(T.jsxs)(l.a,{container:!0,style:{background:"#fff",marginTop:"-11px"},children:[Object(T.jsx)(l.a,{item:!0,xs:12,children:Object(T.jsx)(P,{style:{height:"auto"},valueLabelDisplay:"auto",defaultValue:0,value:e.timed,min:0,max:e.duratioin,step:1e-9,onChange:e.sliderOnChange,getAriaValueText:e.valueLabelFormat,valueLabelFormat:e.valueLabelFormat})}),Object(T.jsxs)(l.a,{container:!0,alignItems:"center",style:{padding:"0 20px 10px 20px"},children:[Object(T.jsx)(l.a,{item:!0,xs:1,sm:3,md:3,lg:3,xl:3,style:{color:"#777"},children:Object(T.jsxs)(l.a,{container:!0,alignItems:"center",wrap:"wrap",children:[Object(T.jsx)(S.a,{xsDown:!0,children:Object(T.jsxs)(l.a,{item:!0,sm:12,md:12,lg:5,xl:3,children:[Object(T.jsx)("span",{children:e.valueLabelFormat(e.timed)}),"/",Object(T.jsx)("span",{children:e.valueLabelFormat(e.duratioin)})]})}),Object(T.jsx)(l.a,{item:!0,sm:12,md:12,lg:7,xl:5,children:Object(T.jsx)(A,{isMute:e.isMute,onChange:e.volumeSliderOnChange,onClick:e.volumeOnClick,volume:e.volume})})]})}),Object(T.jsx)(l.a,{item:!0,xs:10,sm:6,md:6,lg:6,xl:6,children:Object(T.jsxs)(l.a,{container:!0,justify:"center",alignItems:"center",spacing:1,children:[Object(T.jsx)(l.a,{item:!0,children:Object(T.jsx)(w.a,{size:"medium",onClick:function(){return e.fastTimed(-15)},children:Object(T.jsx)(D.a,{fontSize:"small",color:"secondary"})})}),Object(T.jsx)(l.a,{item:!0,children:Object(T.jsx)(w.a,{onClick:e.playOrPause,children:"play"===e.statusIcon?Object(T.jsx)(C.a,{fontSize:"large",color:"secondary"}):Object(T.jsx)(_.a,{fontSize:"large",color:"secondary"})})}),Object(T.jsx)(l.a,{item:!0,children:Object(T.jsx)(w.a,{size:"medium",onClick:function(){return e.fastTimed(15)},children:Object(T.jsx)(I.a,{fontSize:"small",color:"secondary"})})})]})}),Object(T.jsx)(l.a,{item:!0,xs:1,sm:3,md:3,lg:3,xl:3})]})]})})},R=function(e){var t=n.useState(0),o=Object(a.a)(t,2),i=o[0],r=o[1],s=n.useState(0),u=Object(a.a)(s,2),c=u[0],l=u[1],d=n.useState("pause"),b=Object(a.a)(d,2),m=b[0],h=b[1],j=null;n.useEffect((function(){return e.youtubeDisp&&(l(e.youtubeDisp.getDuration()),j=setInterval((function(e){var t=e.youtubeDisp.getCurrentTime();r(t)}),150,e)),function(){j&&clearInterval(j)}}),[e.youtubeDisp]),n.useEffect((function(){if(e.youtubeDisp){var t=e.youtubeDisp.getDuration();l(t)}p(e.videoStatus)}),[e.videoStatus]);var p=function(e){switch(e){case-1:case 0:h("play");break;case 1:h("pause");break;case 2:case 3:case 5:h("play")}};return Object(T.jsx)(F,{statusIcon:m,timed:i,sliderOnChange:function(t,o){e.youtubeDisp&&(e.socket.emit("youtube_seek",o),e.youtubeDisp.seekTo(Number(o),!0),r(Number(o)))},fastTimed:function(t){if(e.youtubeDisp){var o=i+t;c<=o&&(r(o=c-.2),e.youtubeDisp.pauseVideo(),window.setTimeout((function(){var t;null===(t=e.youtubeDisp)||void 0===t||t.playVideo()}),200)),e.youtubeDisp.seekTo(o,!0),e.socket.emit("youtube_seek",o)}},duratioin:c,valueLabelFormat:function(e){if(!e)return"00:00";var t=Math.floor(e),o=Math.floor(t%86400/3600),a=Math.floor(t%86400%3600/60),n=t%86400%3600%60;return 0===o?String(a).padStart(2,"0")+":"+String(n).padStart(2,"0"):String(o).padStart(2,"0")+":"+String(a).padStart(2,"0")+":"+String(n).padStart(2,"0")},playOrPause:function(){var t,o;"play"===m?null===(t=e.youtubeDisp)||void 0===t||t.playVideo():null===(o=e.youtubeDisp)||void 0===o||o.pauseVideo()},volume:e.volume,volumeOnClick:function(){e.isMuted?e.unMute():e.mute()},volumeSliderOnChange:function(t,o){var a=Number(o);switch(t.type){case"mousemove":break;case"mousedown":a>5&&e.setVolumeLog(a)}e.changeVolume(a),a<1?e.mute():e.isMuted&&e.unMute()},isMute:e.isMuted})},B=(o(228),o(229)),N=o.n(B),U=function(e){return Object(T.jsxs)(l.a,{container:!0,className:"PlayingBoard",alignItems:"center",children:[Object(T.jsx)(l.a,{item:!0,xs:1,children:Object(T.jsx)(d.a,{children:Object(T.jsxs)("svg",{id:"icon-audio-disc",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",children:[Object(T.jsx)("path",{d:"M32 2a30 30 0 1 0 30 30A30 30 0 0 0 32 2zm0 58a28 28 0 1 1 28-28 28 28 0 0 1-28 28z"}),Object(T.jsx)("path",{d:"M32 6A26 26 0 0 0 6 32h2A24 24 0 0 1 32 8zM32 56v2a26 26 0 0 0 26-26h-2a24 24 0 0 1-24 24z"}),Object(T.jsx)("path",{d:"M32 52v2a22 22 0 0 0 22-22h-2a20 20 0 0 1-20 20z"}),Object(T.jsx)("path",{d:"M46 32a14 14 0 1 0-14 14 14 14 0 0 0 14-14zm-26 0a12 12 0 1 1 12 12 12 12 0 0 1-12-12z"}),Object(T.jsx)("path",{d:"M41 32a9 9 0 1 0-9 9 9 9 0 0 0 9-9zm-16 0a7 7 0 1 1 7 7 7 7 0 0 1-7-7z"}),Object(T.jsx)("path",{d:"M36 32a4 4 0 1 0-4 4 4 4 0 0 0 4-4zm-6 0a2 2 0 1 1 2 2 2 2 0 0 1-2-2zM6 34h2v2H6z"})]})})}),Object(T.jsx)(l.a,{item:!0,xs:11,children:Object(T.jsx)(d.a,{className:"title",children:Object(T.jsx)("p",{children:e.title})})})]})},E=(o(247),function(e){var t=n.useState(""),o=Object(a.a)(t,2),i=o[0],r=o[1];n.useEffect((function(){e.videoId&&s()}),[e.videoId]);var s=function(){console.log("youtube videoId",e.videoId),N.a.get("https://www.googleapis.com/youtube/v3/search?key=".concat("AIzaSyBr9XUzbRVyQA0tDAGvIVdytGM7TaHTw7g","&part=id,snippet"),{params:{q:e.videoId}}).then((function(e){var t=e.data;if(200===e.status)try{var o=t.items[0].snippet.title;r(o)}catch(a){r("\u52d5\u753b\u30bf\u30a4\u30c8\u30eb\u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f")}}))};return Object(T.jsx)(U,{title:i})}),W=function(e){return Object(T.jsx)(n.Fragment,{children:Object(T.jsx)(l.a,{container:!0,justify:"center",children:Object(T.jsx)(l.a,{item:!0,xs:12,children:Object(T.jsx)(d.a,{style:{padding:"0 0 10px 0"},children:Object(T.jsxs)(l.a,{container:!0,children:[Object(T.jsx)(l.a,{item:!0,xs:12,sm:6,md:4,lg:5,xl:4,children:Object(T.jsx)(E,{videoId:e.videoId})}),Object(T.jsx)(l.a,{style:{background:"black"},item:!0,xs:12,children:Object(T.jsx)(y.a,Object(c.a)(Object(c.a)({},e.player),{},{opts:e.opts,className:"youtube_display"}))}),Object(T.jsx)(l.a,{item:!0,style:{background:"#000"},xs:12,children:Object(T.jsx)(R,Object(c.a)({},e.controller))})]})})})})})},H=o(188),q=o.n(H),G=function(e){Object(g.a)(o,e);var t=Object(x.a)(o);function o(e){var a;return Object(p.a)(this,o),(a=t.call(this,e)).socket=a.props.socket,a.defaultOpts=function(e){return{width:"100%",height:"700px",playerVars:{controls:e?0:1,rel:0,playsinline:1,fs:0,disablekb:1,modestbranding:1}}},a.setUpSocketListenner=function(){for(var e=0,t=["youtube_add_movie","youtube_pause","youtube_play","youtube_seek","request_playing_data","new_playing_data"];e<t.length;e++){var o=t[e];a.socket.off(o)}a.socket.on("youtube_add_movie",(function(e){a.state.youtubeDisp&&(console.log("movieId",e),a.setState({videoId:e}),a.state.youtubeDisp.cueVideoById(e),a.setUpBuffer(a.state.youtubeDisp).then((function(){var e;null===(e=a.state.youtubeDisp)||void 0===e||e.playVideo()})))})),a.socket.on("youtube_pause",(function(e){a.state.youtubeDisp&&(console.log("listen!pause!",e),a.setState({getAction:!0},(function(){var t,o;null===(t=a.state.youtubeDisp)||void 0===t||t.pauseVideo(),null===(o=a.state.youtubeDisp)||void 0===o||o.seekTo(e,!0)})))})),a.socket.on("youtube_play",(function(e){a.state.youtubeDisp&&(console.log("listen!play!",e),a.setState({getAction:!0},(function(){var e;null===(e=a.state.youtubeDisp)||void 0===e||e.playVideo()})))})),a.socket.on("youtube_seek",(function(e){a.state.youtubeDisp&&a.state.youtubeDisp.seekTo(e,!0)})),a.socket.on("request_playing_data",function(){var e=Object(j.a)(h.a.mark((function e(t){var o,n,i,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.youtubeDisp){e.next=2;break}return e.abrupt("return");case 2:o=a.state.youtubeDisp.getPlayerState(),n=a.state.youtubeDisp.getCurrentTime(),i={time:n||0,isPlaying:!!o&&a.statusCheck(o)},a.state.videoId&&(i.movie_id=a.state.videoId),r={socket_id:t,playingData:i},a.socket.emit("send_playing_data",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.socket.on("new_playing_data",(function(e){a.state.youtubeDisp&&(console.log("newplayingData",e),e.movie_id&&(a.state.youtubeDisp.cueVideoById(e.movie_id),a.setState({videoId:e.movie_id})),a.setUpBuffer(a.state.youtubeDisp).then((function(){var t,o,n;e.isPlaying?(null===(t=a.state.youtubeDisp)||void 0===t||t.seekTo(e.time+1.5,!0),null===(o=a.state.youtubeDisp)||void 0===o||o.playVideo()):null===(n=a.state.youtubeDisp)||void 0===n||n.seekTo(e.time,!0);window.setTimeout((function(){a.setState({isFirst:!1})}),500)})))}))},a.statusCheck=function(e){var t=!1;switch(e){case-1:case 0:t=!1;break;case 1:t=!0;break;case 2:case 3:case 5:t=!1}return t},a.isSmartPhone=function(){return!!navigator.userAgent.match(/iPhone|Android.+Mobile/)},a.player={onPlay:function(e){var t=e.target;e.data;a.state.isFirst||(a.state.getAction?a.setState({getAction:!1}):a.socket.emit("youtube_play",t.getCurrentTime()))},onPause:function(e){var t=e.target;e.data;a.state.isFirst||(a.state.getAction?a.setState({getAction:!1}):a.socket.emit("youtube_pause",t.getCurrentTime()))},onReady:function(e){var t=e.target;a.setState({youtubeDisp:t});var o=navigator.userAgent.toLowerCase();if(a.isSmartPhone())a.mute(),a.props.room.isOwner?(t.cueVideoById("b6-2P8RgT0A"),a.setState({videoId:"b6-2P8RgT0A"},(function(){a.setUpBuffer(t).then((function(){console.log("Buffer\u5b8c\u4e86"),a.setState({isFirst:!1})}))}))):a.socket.emit("youtube_sync");else{var n=0;if(o.match("chrome")&&!o.match("edg"))n=t.getVolume();else{var i=q.a.get("streaming_volume");n=i?Number(i):20}var r=0;a.setState((function(e){var t,o,a,i;return r=null===(t=e.opts)||void 0===t||null===(o=t.playerVars)||void 0===o?void 0:o.controls,1===(null===(a=e.opts)||void 0===a||null===(i=a.playerVars)||void 0===i?void 0:i.controls)?Object(c.a)(Object(c.a)({},e),{},{volumeLog:n}):Object(c.a)({},e)}),(function(){a.setState((function(e){var t;return{opts:Object(c.a)(Object(c.a)({},e.opts),{},{playerVars:Object(c.a)(Object(c.a)({},null===(t=e.opts)||void 0===t?void 0:t.playerVars),{},{controls:0})})}}),(function(){t.setVolume(0),a.props.room.isOwner?0===r&&(t.cueVideoById("b6-2P8RgT0A"),a.setState({videoId:"b6-2P8RgT0A"},(function(){a.setUpBuffer(t).then((function(){console.log("Buffer\u5b8c\u4e86"),a.setState({isFirst:!1})}))}))):a.socket.emit("youtube_sync")}))}))}},onStateChange:function(e){e.target;var t=e.data;a.setState({videoStatus:t})}},a.setUpBuffer=function(e){return new Promise((function(t){a.mute(),e.playVideo(),window.setTimeout((function(){e.pauseVideo(),e.seekTo(0,!0),a.isSmartPhone()||a.unMute(),t(!0)}),1e3)}))},a.changeVolume=function(e){var t;null===(t=a.state.youtubeDisp)||void 0===t||t.setVolume(e),a.setState({volume:e})},a.setVolumeLog=function(e){e>5&&e<=100&&a.setState({volumeLog:e})},a.mute=function(){a.setState({isMuted:!0},(function(){var e;a.setState((function(e){return e.volume>5?{volumeLog:a.state.volume}:Object(c.a)({},e)})),a.changeVolume(0),null===(e=a.state.youtubeDisp)||void 0===e||e.mute()}))},a.unMute=function(){var e;a.setState({isMuted:!1}),null===(e=a.state.youtubeDisp)||void 0===e||e.unMute(),a.state.volumeLog>1?a.changeVolume(a.state.volumeLog):a.changeVolume(30)},a.state={youtubeDisp:void 0,videoId:"",videoStatus:-1,getAction:!1,isFirst:!0,volume:0,volumeLog:0,isMuted:!0,opts:a.defaultOpts(a.isSmartPhone())},a.mute=a.mute.bind(Object(v.a)(a)),a.unMute=a.unMute.bind(Object(v.a)(a)),a.changeVolume=a.changeVolume.bind(Object(v.a)(a)),a}return Object(f.a)(o,[{key:"componentDidUpdate",value:function(){this.state.youtubeDisp&&this.setUpSocketListenner()}},{key:"componentWillUnmount",value:function(){q.a.set("streaming_volume",String(this.state.volume))}},{key:"render",value:function(){return Object(T.jsx)(n.Fragment,{children:Object(T.jsx)(W,{player:this.player,opts:this.state.opts,videoId:this.state.videoId,controller:{socket:this.socket,youtubeDisp:this.state.youtubeDisp,videoStatus:this.state.videoStatus,volume:this.state.volume,isMuted:this.state.isMuted,mute:this.mute,unMute:this.unMute,changeVolume:this.changeVolume,setVolumeLog:this.setVolumeLog}})})}}]),o}(n.Component),J=(o(248),o(189)),Q=o(274),X=o(173),Y=function(e){return Object(T.jsx)("form",{style:{width:"100%"},onSubmit:e.addMovieHandler,children:Object(T.jsxs)(l.a,{container:!0,spacing:1,children:[Object(T.jsx)(l.a,{item:!0,xs:12,lg:11,xl:11,children:Object(T.jsx)(Q.a,{fullWidth:!0,variant:"outlined",placeholder:"YouTube Movie URL",color:"secondary",style:{borderRadius:"none",background:"#f9f9f9",height:"100%"},value:e.videoId,onChange:function(t){return e.onChange(t.target.value)}})}),Object(T.jsx)(l.a,{item:!0,xs:12,lg:1,xl:1,children:Object(T.jsx)(X.a,{fullWidth:!0,type:"submit",color:"secondary",variant:"contained",style:{height:"100%"},disableElevation:!0,children:"\u5909\u66f4"})})]})})},K=function(e){var t=e.socket,o=n.useState(""),i=Object(a.a)(o,2),r=i[0],s=i[1];return Object(T.jsx)(Y,{videoId:r,onChange:function(e){s(e)},addMovieHandler:function(e){e.preventDefault(),t.emit("youtube_add_movie",r),s("")}})},Z=function(e){return Object(T.jsxs)(n.Fragment,{children:[!(!e.room.roomId||!e.socket)&&Object(T.jsxs)(l.a,{container:!0,justify:"center",className:"RoomContainer",children:[Object(T.jsx)(l.a,{item:!0,xs:11,lg:9,xl:9,children:Object(T.jsx)(d.a,{children:Object(T.jsx)(G,{socket:e.socket,room:e.room})})}),Object(T.jsx)(l.a,{item:!0,xs:11,lg:9,xl:9,children:Object(T.jsx)(d.a,{boxSizing:"border-box",padding:"10px 11px",borderRadius:"2px",style:{background:"#fff"},children:Object(T.jsx)(K,{socket:e.socket})})})]}),!e.room.roomId&&Object(T.jsx)("div",{className:"base",children:Object(T.jsx)("div",{className:"wave"})}),Object(T.jsx)(b.a,{open:e.nameDialog,children:Object(T.jsx)(J.a,Object(c.a)({width:"100%",head:"\u30e6\u30fc\u30b6\u30fc\u30cd\u30fc\u30e0",btn:"\u5165\u5ba4"},e.createForm))})]})};t.default=function(e){var t=n.useState(null),o=Object(a.a)(t,2),c=o[0],l=o[1],d=n.useState(!1),b=Object(a.a)(d,2),m=b[0],h=b[1],j=n.useState(""),p=Object(a.a)(j,2),f=p[0],v=p[1],g=n.useState(!1),x=Object(a.a)(g,2),y=x[0],O=x[1],k=Object(r.c)((function(e){return e.room})),S=Object(i.f)(),w=Object(r.b)(),D=Object(s.b)().enqueueSnackbar;n.useEffect((function(){return e.getSocket().then((function(e){if(l(e),!k.roomId){var t=C("room_id");t&&e.emit("check_room",t,(function(e){if(e){var o=q.a.get("streaming_name");o&&z({value:o,error:!1,msg:""}),v(t),h(!0)}else _("\u30eb\u30fc\u30e0\u304c\u5b58\u5728\u3057\u307e\u305b\u3093\u3067\u3057\u305f","error",{horizontal:"center",vertical:"top"}),S.push("/")}))}})),function(){e.clearSocket()}}),[]),n.useEffect((function(){c&&(c.on("user_joined",(function(e){_(e.user.name+"\u304c\u5165\u5ba4\u3057\u307e\u3057\u305f","success")})),c.on("user_left",(function(e){_(e.user.name+"\u304c\u9000\u51fa\u3057\u307e\u3057\u305f","error")})))}),[c]);var C=function(e){return new URLSearchParams(window.location.search).get(e)},_=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{horizontal:"left",vertical:"bottom"};screen.width<600||D(e,{variant:t,anchorOrigin:{horizontal:o.horizontal,vertical:o.vertical},autoHideDuration:2e3})},I=n.useState({value:"Guest",error:!1,msg:""}),M=Object(a.a)(I,2),V=M[0],z=M[1],L=[{label:"",placeholder:"\u9808\u9ce5\u6b66 \u592a\u90ce",value:V.value,error:V.error,msg:V.msg,onChange:function(e){var t=this.validate(e),o=t.error,a=t.msg;z({value:e,error:o,msg:a})},validate:function(e){var t={error:!1,msg:""};return""===e?(t.error=!0,t.msg="\u30e6\u30fc\u30b6\u30cd\u30fc\u30e0\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"):e.length>13&&(t.error=!0,t.msg="12\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"),t}}];return Object(T.jsx)(Z,{socket:c,room:k,nameDialog:m,createForm:{inputs:L,load:y,onSubmit:function(){c&&(O(!0),console.log("enterSubmitHandler",c,f),q.a.set("streaming_name",V.value),function(e,t){if(!e)return _("\u5165\u5ba4\u306b\u5931\u6557\u3057\u307e\u3057\u305f","error",{horizontal:"center",vertical:"top"});e.emit("join_room",{room_id:t.roomId,user_name:V.value},(function(e){e?(w(u.a.actions.setRoom({roomId:t.roomId,userName:V.value,isOwner:!1})),h(!1)):(_("\u5165\u5ba4\u306b\u5931\u6557\u3057\u307e\u3057\u305f","error",{horizontal:"center",vertical:"top"}),S.push("/")),O(!1)}))}(c,{roomId:f}))}}})}}}]);
//# sourceMappingURL=5.002a7efe.chunk.js.map