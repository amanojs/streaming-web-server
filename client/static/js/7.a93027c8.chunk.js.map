{"version":3,"sources":["components/InputText/index.tsx","components/CreateForm/Presenter.tsx","components/CreateForm/index.tsx","pages/Home/Presenter.tsx","assets/Streaming-logo.png","pages/Home/index.tsx"],"names":["InputText","props","style","color","padding","fontSize","fontWeight","fontFamily","label","TextField","fullWidth","error","helperText","msg","variant","value","onChange","e","target","placeholder","Presenter","classes","makeStyles","form_card","width","useStyles","Card","className","onSubmit","submitEvent","Grid","container","justify","spacing","item","xs","Box","display","justifyContent","alignItems","lineHeight","marginBottom","head","inputs","map","input","Button","type","disabled","load","disableElevation","CircularProgress","size","btn","CreateForm","bind","validateAll","errorFlag","validate","a","preventDefault","defaultProps","baseGrid","position","height","zIndex","sm","md","lg","xl","src","alt","createForm","Home","React","mountkeeper","userName","setUserName","setLoad","dispach","useDispatch","history","useHistory","this","val","response","length","clearSocket","cookieName","Cookie","get","createRoomHandler","getSocket","socket","set","emit","res","result","roomModule","actions","setRoom","roomId","room_id","isOwner","push"],"mappings":"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","file":"static/js/7.a93027c8.chunk.js","sourcesContent":["import * as React from 'react';\r\nimport { TextField } from '@material-ui/core';\r\n\r\nexport interface InputTextProps {\r\n  /** ラベル */\r\n  label: string;\r\n  /**プレースホルダ */\r\n  placeholder?: string;\r\n  /** インプットテキストの値 */\r\n  value: string;\r\n  /** エラー状態 */\r\n  error: boolean;\r\n  /** エラー時に表示するメッセージ */\r\n  msg: string;\r\n  /** インプットテキストの値が変更されるたびに実行される処理 */\r\n  onChange: (value: string) => void;\r\n}\r\n\r\n/** ラベル付きのインプットテキスト */\r\nexport const InputText: React.FC<InputTextProps> = (props: InputTextProps) => {\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          color: '#606060',\r\n          padding: '0 0 3px 0',\r\n          fontSize: '13px',\r\n          fontWeight: 'bold',\r\n          fontFamily: 'Noto Sans JP'\r\n        }}\r\n      >\r\n        {props.label}\r\n      </div>\r\n      <TextField\r\n        fullWidth\r\n        error={props.error}\r\n        helperText={props.msg}\r\n        variant=\"outlined\"\r\n        value={props.value}\r\n        onChange={(e) => props.onChange(e.target.value)}\r\n        color=\"secondary\"\r\n        placeholder={props.placeholder}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import * as React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Grid, Card, Button, Box, CircularProgress } from '@material-ui/core';\r\nimport { InputText } from '../InputText';\r\nimport { InputSub } from './index';\r\nimport './main.css';\r\n\r\nexport interface PresenterProps {\r\n  width: string;\r\n  head: string;\r\n  btn: string;\r\n  inputs: InputSub[];\r\n  load: boolean;\r\n  submitEvent: (e: React.FormEvent<HTMLFormElement>) => void;\r\n}\r\n\r\nexport const Presenter: React.FC<PresenterProps> = (props: PresenterProps) => {\r\n  const useStyles = makeStyles({\r\n    form_card: {\r\n      width: props.width,\r\n      padding: '55px 0'\r\n    }\r\n  });\r\n  const classes = useStyles();\r\n  return (\r\n    <Card className={classes.form_card}>\r\n      <form style={{ width: '100%' }} onSubmit={props.submitEvent}>\r\n        <Grid container justify=\"center\" spacing={1}>\r\n          <Grid item xs={10}>\r\n            <Grid container spacing={1}>\r\n              <Grid item xs={12}>\r\n                <Box\r\n                  className=\"create_room_head\"\r\n                  display=\"flex\"\r\n                  justifyContent=\"center\"\r\n                  alignItems=\"center\"\r\n                  lineHeight=\"0px\"\r\n                  marginBottom=\"30px\"\r\n                >\r\n                  <span>{props.head}</span>\r\n                </Box>\r\n              </Grid>\r\n\r\n              {props.inputs.map((input: InputSub) => {\r\n                return (\r\n                  <Grid item xs={12} key={input.label}>\r\n                    <InputText\r\n                      label={input.label}\r\n                      error={input.error}\r\n                      msg={input.msg}\r\n                      placeholder={input.placeholder}\r\n                      value={input.value}\r\n                      onChange={input.onChange}\r\n                    />\r\n                  </Grid>\r\n                );\r\n              })}\r\n              <Grid item xs={12}>\r\n                <Button\r\n                  type=\"submit\"\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  disabled={props.load}\r\n                  disableElevation\r\n                  color=\"secondary\"\r\n                >\r\n                  {props.load ? <CircularProgress size={24} style={{ color: '#fff' }} /> : props.btn}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </Card>\r\n  );\r\n};\r\n","import * as React from 'react';\r\nimport { Presenter } from './Presenter';\r\nimport { InputTextProps } from '../InputText';\r\n\r\nexport interface InputSub extends InputTextProps {\r\n  validate: (val: string) => { error: boolean; msg: string };\r\n}\r\n\r\nexport interface CreateFormProps {\r\n  /** 横幅 px や % で指定 */\r\n  width: string;\r\n  /** フォームタイトル*/\r\n  head: string;\r\n  /** フォームのサブミットボタンのタイトル */\r\n  btn: string;\r\n  /** ロード中か */\r\n  load: boolean;\r\n  /** InputText型にバリデーション処理を加えたインプットの配列 */\r\n  inputs: InputSub[];\r\n  /** サブミット処理(オールバリデーション処理の後に実行されます) */\r\n  onSubmit: () => any;\r\n}\r\n\r\n/** タイトルとインプットテキストとサブミットボタンのシンプルなフォーム */\r\nexport const CreateForm: React.FC<CreateFormProps> = (props: CreateFormProps) => {\r\n  for (const input of props.inputs) {\r\n    input.onChange = input.onChange.bind(input);\r\n  }\r\n\r\n  const validateAll = () => {\r\n    let errorFlag = false;\r\n    for (const input of props.inputs) {\r\n      input.onChange(input.value);\r\n      const { error } = input.validate(input.value);\r\n      if (error) errorFlag = true;\r\n    }\r\n    return errorFlag;\r\n  };\r\n\r\n  const submitEvent = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    if (validateAll()) {\r\n      return;\r\n    }\r\n    await props.onSubmit();\r\n  };\r\n\r\n  return (\r\n    <Presenter\r\n      width={props.width}\r\n      head={props.head}\r\n      btn={props.btn}\r\n      inputs={props.inputs}\r\n      load={props.load}\r\n      submitEvent={submitEvent}\r\n    />\r\n  );\r\n};\r\nCreateForm.defaultProps = {\r\n  width: '100%'\r\n};\r\n","import * as React from 'react';\r\nimport { Grid } from '@material-ui/core';\r\nimport { CreateForm, InputSub } from '../../components/CreateForm';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Logo from '../../assets/Streaming-logo.png';\r\nimport './main.css';\r\n\r\ninterface PresenterProps {\r\n  createForm: {\r\n    inputs: InputSub[];\r\n    load: boolean;\r\n    onSubmit: () => any;\r\n  };\r\n}\r\n\r\nexport const Presenter: React.FC<PresenterProps> = (props: PresenterProps) => {\r\n  const useStyles = makeStyles({\r\n    baseGrid: {\r\n      position: 'relative',\r\n      height: '100%',\r\n      zIndex: 2\r\n    }\r\n  });\r\n  const classes = useStyles();\r\n  return (\r\n    <div className=\"base\">\r\n      <Grid container justify=\"center\" alignItems=\"center\" className={classes.baseGrid}>\r\n        <Grid item xs={11} sm={9} md={6} lg={4} xl={3} style={{ marginBottom: '80px' }}>\r\n          <Grid container spacing={1}>\r\n            <Grid item className=\"logo\" xs={12}>\r\n              <Grid container justify=\"center\" spacing={0}>\r\n                <Grid item xs={3}>\r\n                  <img src={Logo} width=\"100%\" height=\"auto\" alt=\"Logo\" />\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <span>S</span>treaming!!\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <CreateForm width=\"100%\" head=\"ルーム作成\" btn=\"作成\" {...props.createForm} />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <div className=\"wave\"></div>\r\n    </div>\r\n  );\r\n};\r\n","export default \"data:image/png;base64,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\"","import * as React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport roomModule from '../../store/modules/roomModule';\r\nimport { Presenter } from './Presenter';\r\nimport { PageProps } from '../../App';\r\nimport { InputSub } from '../../components/CreateForm';\r\nimport Cookie from 'js-cookie';\r\n\r\nconst Home: React.FC<PageProps> = (props: PageProps) => {\r\n  const [mout, mountkeeper] = React.useState();\r\n  const [userName, setUserName] = React.useState({ value: '', error: false, msg: '' });\r\n  const [load, setLoad] = React.useState<boolean>(false);\r\n\r\n  const dispach = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const inputs: InputSub[] = [\r\n    {\r\n      label: 'ユーザネーム*',\r\n      placeholder: '須鳥武 太郎',\r\n      value: userName.value,\r\n      error: userName.error,\r\n      msg: userName.msg,\r\n      onChange: function (value: string) {\r\n        const { error, msg } = this.validate(value);\r\n        setUserName({ value: value, error, msg });\r\n      },\r\n      validate: (val: string) => {\r\n        const response = { error: false, msg: '' };\r\n        if (val === '') {\r\n          response.error = true;\r\n          response.msg = 'ユーザネームを入力してください';\r\n        } else if (val.length > 13) {\r\n          response.error = true;\r\n          response.msg = '12文字以内で入力してください';\r\n        }\r\n        return response;\r\n      }\r\n    }\r\n  ];\r\n\r\n  React.useEffect(() => {\r\n    props.clearSocket();\r\n    // Cookie存在時ユーザネームセット処理\r\n    const cookieName = Cookie.get('streaming_name');\r\n    if (cookieName) {\r\n      setUserName({ value: cookieName, error: false, msg: '' });\r\n    }\r\n  }, [mountkeeper]);\r\n\r\n  const createRoomHandler = async () => {\r\n    setLoad(true);\r\n    const socket = await props.getSocket();\r\n    // console.log(socket);\r\n    if (socket) {\r\n      Cookie.set('streaming_name', userName.value);\r\n      socket.emit('create_room', userName.value, (res: { result: boolean; room_id: string }) => {\r\n        // console.log(res);\r\n        if (res.result) {\r\n          dispach(roomModule.actions.setRoom({ roomId: res.room_id, userName: userName.value, isOwner: true }));\r\n          history.push('/room' + '?room_id=' + res.room_id);\r\n        }\r\n        setLoad(false);\r\n      });\r\n    } else {\r\n      setLoad(false);\r\n    }\r\n  };\r\n  return <Presenter createForm={{ inputs, load, onSubmit: createRoomHandler }} />;\r\n};\r\n\r\nexport default Home;\r\n"],"sourceRoot":""}