{"version":3,"sources":["components/InputText/index.tsx","components/CreateForm/Presenter.tsx","components/CreateForm/index.tsx","pages/Home/Presenter.tsx","assets/Streaming-logo.png","pages/Home/index.tsx"],"names":["InputText","props","style","color","padding","fontSize","fontWeight","label","TextField","fullWidth","error","helperText","msg","variant","value","onChange","e","target","placeholder","Presenter","classes","makeStyles","form_card","width","useStyles","Card","className","onSubmit","submitEvent","Grid","container","justify","spacing","item","xs","Box","display","justifyContent","alignItems","lineHeight","marginBottom","head","inputs","map","input","Button","type","disabled","load","disableElevation","CircularProgress","size","btn","CreateForm","bind","validateAll","errorFlag","validate","a","preventDefault","defaultProps","baseGrid","position","height","zIndex","sm","md","lg","xl","src","alt","createForm","Home","React","mountkeeper","userName","setUserName","setLoad","dispach","useDispatch","history","useHistory","this","val","response","length","clearSocket","cookieName","Cookie","get","createRoomHandler","getSocket","socket","console","log","set","emit","res","result","roomModule","actions","setRoom","roomId","room_id","isOwner","push"],"mappings":"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","file":"static/js/6.19f3b58d.chunk.js","sourcesContent":["import * as React from 'react';\nimport { TextField } from '@material-ui/core';\n\nexport interface InputTextProps {\n  /** ラベル */\n  label: string;\n  /**プレースホルダ */\n  placeholder?: string;\n  /** インプットテキストの値 */\n  value: string;\n  /** エラー状態 */\n  error: boolean;\n  /** エラー時に表示するメッセージ */\n  msg: string;\n  /** インプットテキストの値が変更されるたびに実行される処理 */\n  onChange: (value: string) => void;\n}\n\n/** ラベル付きのインプットテキスト */\nexport const InputText: React.FC<InputTextProps> = (props: InputTextProps) => {\n  return (\n    <div>\n      <div style={{ color: '#606060', padding: '0 0 3px 0', fontSize: '13px', fontWeight: 'bold' }}>{props.label}</div>\n      <TextField\n        fullWidth\n        error={props.error}\n        helperText={props.msg}\n        variant=\"outlined\"\n        value={props.value}\n        onChange={(e) => props.onChange(e.target.value)}\n        color=\"secondary\"\n        placeholder={props.placeholder}\n      />\n    </div>\n  );\n};\n","import * as React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Grid, Card, Button, Box, CircularProgress } from '@material-ui/core';\nimport { InputText } from '../InputText';\nimport { InputSub } from './index';\nimport './main.css';\n\nexport interface PresenterProps {\n  width: string;\n  head: string;\n  btn: string;\n  inputs: InputSub[];\n  load: boolean;\n  submitEvent: (e: React.FormEvent<HTMLFormElement>) => void;\n}\n\nexport const Presenter: React.FC<PresenterProps> = (props: PresenterProps) => {\n  const useStyles = makeStyles({\n    form_card: {\n      width: props.width,\n      padding: '55px 0'\n    }\n  });\n  const classes = useStyles();\n  return (\n    <Card className={classes.form_card}>\n      <form style={{ width: '100%' }} onSubmit={props.submitEvent}>\n        <Grid container justify=\"center\" spacing={1}>\n          <Grid item xs={10}>\n            <Grid container spacing={1}>\n              <Grid item xs={12}>\n                <Box\n                  className=\"create_room_head\"\n                  display=\"flex\"\n                  justifyContent=\"center\"\n                  alignItems=\"center\"\n                  lineHeight=\"0px\"\n                  marginBottom=\"30px\"\n                >\n                  <span>{props.head}</span>\n                </Box>\n              </Grid>\n\n              {props.inputs.map((input: InputSub) => {\n                return (\n                  <Grid item xs={12} key={input.label}>\n                    <InputText\n                      label={input.label}\n                      error={input.error}\n                      msg={input.msg}\n                      placeholder={input.placeholder}\n                      value={input.value}\n                      onChange={input.onChange}\n                    />\n                  </Grid>\n                );\n              })}\n              <Grid item xs={12}>\n                <Button\n                  type=\"submit\"\n                  fullWidth\n                  variant=\"contained\"\n                  disabled={props.load}\n                  disableElevation\n                  color=\"secondary\"\n                >\n                  {props.load ? <CircularProgress size={24} style={{ color: '#fff' }} /> : props.btn}\n                </Button>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </form>\n    </Card>\n  );\n};\n","import * as React from 'react';\nimport { Presenter } from './Presenter';\nimport { InputTextProps } from '../InputText';\n\nexport interface InputSub extends InputTextProps {\n  validate: (val: string) => { error: boolean; msg: string };\n}\n\nexport interface CreateFormProps {\n  /** 横幅 px や % で指定 */\n  width: string;\n  /** フォームタイトル*/\n  head: string;\n  /** フォームのサブミットボタンのタイトル */\n  btn: string;\n  /** ロード中か */\n  load: boolean;\n  /** InputText型にバリデーション処理を加えたインプットの配列 */\n  inputs: InputSub[];\n  /** サブミット処理(オールバリデーション処理の後に実行されます) */\n  onSubmit: () => any;\n}\n\n/** タイトルとインプットテキストとサブミットボタンのシンプルなフォーム */\nexport const CreateForm: React.FC<CreateFormProps> = (props: CreateFormProps) => {\n  for (const input of props.inputs) {\n    input.onChange = input.onChange.bind(input);\n  }\n\n  const validateAll = () => {\n    let errorFlag = false;\n    for (const input of props.inputs) {\n      input.onChange(input.value);\n      const { error } = input.validate(input.value);\n      if (error) errorFlag = true;\n    }\n    return errorFlag;\n  };\n\n  const submitEvent = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (validateAll()) {\n      return;\n    }\n    await props.onSubmit();\n  };\n\n  return (\n    <Presenter\n      width={props.width}\n      head={props.head}\n      btn={props.btn}\n      inputs={props.inputs}\n      load={props.load}\n      submitEvent={submitEvent}\n    />\n  );\n};\nCreateForm.defaultProps = {\n  width: '100%'\n};\n","import * as React from 'react';\nimport { Grid } from '@material-ui/core';\nimport { CreateForm, InputSub } from '../../components/CreateForm';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Logo from '../../assets/Streaming-logo.png';\nimport './main.css';\n\ninterface PresenterProps {\n  createForm: {\n    inputs: InputSub[];\n    load: boolean;\n    onSubmit: () => any;\n  };\n}\n\nexport const Presenter: React.FC<PresenterProps> = (props: PresenterProps) => {\n  const useStyles = makeStyles({\n    baseGrid: {\n      position: 'relative',\n      height: '100%',\n      zIndex: 2\n    }\n  });\n  const classes = useStyles();\n  return (\n    <div className=\"base\">\n      <Grid container justify=\"center\" alignItems=\"center\" className={classes.baseGrid}>\n        <Grid item xs={11} sm={9} md={6} lg={4} xl={3} style={{ marginBottom: '80px' }}>\n          <Grid container spacing={1}>\n            <Grid item className=\"logo\" xs={12}>\n              <Grid container justify=\"center\" spacing={0}>\n                <Grid item xs={3}>\n                  <img src={Logo} width=\"100%\" height=\"auto\" alt=\"Logo\" />\n                </Grid>\n                <Grid item xs={12}>\n                  <span>S</span>treaming!!\n                </Grid>\n              </Grid>\n            </Grid>\n            <Grid item xs={12}>\n              <CreateForm width=\"100%\" head=\"ルーム作成\" btn=\"作成\" {...props.createForm} />\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n      <div className=\"wave\"></div>\n    </div>\n  );\n};\n","export default \"data:image/png;base64,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\"","import * as React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport roomModule from '../../store/modules/roomModule';\nimport { Presenter } from './Presenter';\nimport { PageProps } from '../../App';\nimport { InputSub } from '../../components/CreateForm';\nimport Cookie from 'js-cookie';\n\nconst Home: React.FC<PageProps> = (props: PageProps) => {\n  const [mout, mountkeeper] = React.useState();\n  const [userName, setUserName] = React.useState({ value: '', error: false, msg: '' });\n  const [load, setLoad] = React.useState<boolean>(false);\n\n  const dispach = useDispatch();\n  const history = useHistory();\n\n  const inputs: InputSub[] = [\n    {\n      label: 'ユーザネーム*',\n      placeholder: '須鳥武 太郎',\n      value: userName.value,\n      error: userName.error,\n      msg: userName.msg,\n      onChange: function (value: string) {\n        const { error, msg } = this.validate(value);\n        setUserName({ value: value, error, msg });\n      },\n      validate: (val: string) => {\n        const response = { error: false, msg: '' };\n        if (val === '') {\n          response.error = true;\n          response.msg = 'ユーザネームを入力してください';\n        } else if (val.length > 13) {\n          response.error = true;\n          response.msg = '12文字以内で入力してください';\n        }\n        return response;\n      }\n    }\n  ];\n\n  React.useEffect(() => {\n    props.clearSocket();\n    // Cookie存在時ユーザネームセット処理\n    const cookieName = Cookie.get('streaming_name');\n    if (cookieName) {\n      setUserName({ value: cookieName, error: false, msg: '' });\n    }\n  }, [mountkeeper]);\n\n  const createRoomHandler = async () => {\n    setLoad(true);\n    const socket = await props.getSocket();\n    console.log(socket);\n    if (socket) {\n      Cookie.set('streaming_name', userName.value);\n      socket.emit('create_room', userName.value, (res: { result: boolean; room_id: string }) => {\n        console.log(res);\n        if (res.result) {\n          dispach(roomModule.actions.setRoom({ roomId: res.room_id, userName: userName.value, isOwner: true }));\n          history.push('/room' + '?room_id=' + res.room_id);\n        }\n        setLoad(false);\n      });\n    } else {\n      setLoad(false);\n    }\n  };\n  return <Presenter createForm={{ inputs, load, onSubmit: createRoomHandler }} />;\n};\n\nexport default Home;\n"],"sourceRoot":""}